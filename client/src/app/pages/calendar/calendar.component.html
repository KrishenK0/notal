<ng-container *ngIf="database$ | async as database_id">
  <ng-container *ngIf="view === '' && database_id.result == false">
    <div *ngIf="allPages$ | async as pages; else loading">
      <div class="w-auto h-full flex justify-center items-center">
        <div class="w-full max-w-xs bg-white shadow rounded px-8 pt-6 pb-8 mb-4">
          <h2 class="text-xl font-bold mb-4">Please choose the parent page of the database.</h2>
          <form>
              <select name="parent" id="" class="w-full" [(ngModel)]="parent">
                <ng-container *ngFor="let page of pages.result;">
                    <option [value]="page.id"><span>{{ page.icon }}</span> {{ page.title }}</option>
                </ng-container>
              </select>
              <button class="btn-primary" type="submit" (click)="changeView('alcuin')">Choose</button>
          </form>
        </div>
      </div>
    </div>
    <ng-template #loading>
      <p>Loading...</p>
    </ng-template>
  </ng-container>
</ng-container>

<div *ngIf="view === 'type'" class="w-auto h-full flex flex-col justify-center items-center">
  <h1 class="text-lg font-bold mb-8">Please select the range of synchronization</h1>
  <div class="text-center flex flex-row gap-x-8">
    <button (click)="changeType('month')" class="card">
        <h2 class="font-bold">Month</h2>
        <p>Synchronize the current month</p>
    </button>
    <button (click)="changeType('week')" class="card">
      <h2 class="font-bold">Week</h2>
      <p>Synchronize the current week</p>
    </button>
  </div>
</div>

<div *ngIf="view === 'alcuin'" class="w-auto h-full flex justify-center items-center">
  <div class="w-full max-w-xs bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
    <h2 class="text-xl font-bold">Alcuin login</h2>
    <form method="post" (ngSubmit)="onSubmit()" [formGroup]="alForm">
      <div class="mb-4 mt-2">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="username">
          Username
        </label>
        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" id="username" formControlName="username" type="text" placeholder="Username">
      </div>
      <div class="mb-3">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="password">
          Password
        </label>
        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline" id="password" formControlName="password" type="password" placeholder="********">
      </div>
      <button class="btn-primary" type="submit">
        Synchronize
      </button>
    </form>
  </div>
</div>

<div *ngIf="view === 'success'" class="w-auto h-full flex flex-col justify-center items-center text-center">
  <div class="w-full max-w-xs rounded px-8 pt-6 pb-8 mb-4">
    <div class="svg-container flex justify-center mb-4">    
      <svg class="ft-green-tick" xmlns="http://www.w3.org/2000/svg" height="100" width="100" viewBox="0 0 48 48" aria-hidden="true">
          <circle class="circle" fill="#5bb543" cx="24" cy="24" r="22"/>
          <path class="tick" fill="none" stroke="#FFF" stroke-width="6" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="M14 27l5.917 4.917L34 17"/>
      </svg>
    </div>
    <p>Your Notion calendar has been synchronized successfully.</p>
    <button href="#" routerLink="/" class="btn-primary">Back to the home</button>
  </div>
</div>
